{% extends "base.html" %}
{% block title %}Portfolio â€” Photography{% endblock %}
{% block content %}

<section class="py-10 bg-gray-50 dark:bg-gray-900">
  <div class="container mx-auto px-4">
    <h2 class="text-3xl font-bold mb-6 text-center">My Portfolio</h2>

    <!-- Category Filters -->
    <div class="flex justify-center flex-wrap gap-3 mb-8">
      <a href="{% url 'portfolio:gallery_list' %}"
         class="px-4 py-2 rounded {% if not selected_category %}bg-indigo-600 text-white{% else %}bg-gray-200 dark:bg-gray-800 text-gray-700{% endif %}">
         All
      </a>
      {% for c in categories %}
        <a href="?category={{ c.slug }}"
           class="px-4 py-2 rounded {% if selected_category == c.slug %}bg-indigo-600 text-white{% else %}bg-gray-200 dark:bg-gray-800 text-gray-700{% endif %}">
           {{ c.name }}
        </a>
      {% endfor %}
    </div>

    <!-- Photo Grid -->
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
      {% for photo in photos %}
        <div class="group relative overflow-hidden rounded shadow">
          <!-- Link that GLightbox will pick up -->
          <a href="{{ photo.image.url }}" class="glightbox" data-gallery="portfolio-photos" data-title="{{ photo.title|escape }}" data-description="{{ photo.description|default:''|escape }}">
            <!-- lazy image: data-src only (IntersectionObserver will set the src) -->
            <img
              data-src="{{ photo.image.url }}"
              alt="{{ photo.title|escape }}"
              loading="lazy"
              class="w-full h-64 object-cover transform group-hover:scale-110 transition duration-500"
            >
          </a>

          <!-- Overlay with title and download -->
          <div class="absolute bottom-3 left-3 right-3 flex justify-between items-center opacity-0 group-hover:opacity-100 transition">
            <div class="bg-black bg-opacity-60 text-white text-sm px-3 py-1 rounded">{{ photo.title }}</div>
            <a href="{{ photo.image.url }}" download class="bg-white bg-opacity-90 text-black text-sm px-3 py-1 rounded">Download</a>
          </div>
        </div>
      {% empty %}
        <p class="text-gray-500 text-center col-span-full">No photos added yet.</p>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}
